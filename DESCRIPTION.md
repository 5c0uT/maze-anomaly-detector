# Описание работы проекта

## Архитектура системы

1. Проект состоит из 3 основных компонентов:

2. Генератор лабиринтов (Python/C++)

3. Детектор дефектов (Python/C++)

Физический валидатор (C++)

Взаимодействие:
Пользователь → generate_maze.py → MazeGenerator → Экспорт → detect_defects.py → DefectAnalyzer → Отчет


## Ключевые модули

### core/
- `maze_core.cpp`: Генерация воксельной сетки лабиринта (алгоритм Prim)
- `physics_core.cpp`: Физическая валидация путей (радиус агента, высота ступеней)
- `defect_core.cpp`: Детекция самопересечений в 3D-моделях
- `CMakeLists.txt`: Конфигурация сборки для pybind11

### maze/
- `generator.py`: Интерфейс генерации лабиринта
- `exporter.py`: Конвертация воксельной сетки в GLTF через Marching Cubes
- `validator.py`: Интеграция физического валидатора

### detector/
- `analyzer.py`: Анализ 3D-моделей на дефекты
- `visualizer.py`: Анаглифная визуализация дефектов
- `reporter.py`: Генерация HTML отчетов

## Алгоритмы работы

### Генерация лабиринта
1. Инициализация 3D сетки
2. Построение основного прохода (алгоритм рекурсивного деления)
3. Добавление случайных ответвлений
4. Физическая валидация критических путей
5. Конвертация в полигональную сетку (Marching Cubes)
6. Экспорт в GLTF

### Детекция дефектов
1. Загрузка 3D-модели (STL/OBJ/GLTF)
2. Проверка водонепроницаемости модели
3. Поиск самопересечений:
   - Ray-casting для обнаружения пересечений
   - Анализ нормалей соседних полигонов
   - Вычисление минимальных расстояний
4. Визуализация дефектов (анаглифный рендеринг)
5. Генерация HTML отчета

## Файловая структура

### Исполняемые скрипты
- `generate_maze.py`: Точка входа для генерации лабиринтов
- `detect_defects.py`: Точка входа для анализа дефектов
- `setup.bat`: Автоматизация установки (Windows)

### Вспомогательные скрипты
- `build_core.bat`: Сборка C++ модулей
- `check_imports.py`: Проверка зависимостей
- `validator.py`: Физическая валидация путей

### Конфигурационные файлы
- `requirements.txt`: Python зависимости
- `CMakeLists.txt`: Конфигурация сборки C++ модулей

## Физическая модель
Параметры агента:
- Радиус: 0.3 * размер_ячейки (мин. 0.5м)
- Высота ступени: 0.25 * размер_ячейки
- Угол подъема: 45 градусов

Валидация пути:
1. Преобразование воксельного пути в мировые координаты
2. Пошаговая симуляция движения агента
3. Проверка:
   - Достаточной ширины проходов
   - Преодолимой высоты ступеней
   - Допустимого угла наклона поверхностей
